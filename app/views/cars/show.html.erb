<div class="container">
  <div class="contiainer">
  <div><h1><%= @car.make %></h1><h2><%= @car.model%></h2></div>
    <div class="image">
      <%= cl_image_tag @car.image.key, crop: :fill, class:"card-img-top" %>
    </div>
  </div>
      <div>
        <h3 class="text-lg font-medium leading-6 text-gray-900">
          <%= simple_form_for [@car], html: { data: { action: "turbo:submit-end" }} do |f| %>
          <%= f.error_notification %>
          <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
          <%= f.input :kilometers %>
        <div class="form-actions">
          <%= f.submit class:"btn btn-primary"%>
        </div>
         <% end %> </h3>

        <h4 class="text-lg font-medium leading-6 text-gray-900">Last updated: <%= "#{@car.updated_at.year}/#{@car.updated_at.month}/#{@car.updated_at.day}" %></h4>
        <div class="mt-5 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3">
            <div class="relative overflow-hidden rounded-lg bg-white p-4 shadow space-y-4">
              <div class="flex">
                <div class="flex-grow-1 space-y-4">
                  <div class="flex items-center justify-between">
                    <div class="space-y-0.5">
                      <p class="text-sm text-violet-500 font-medium mb-0">Tyres</p>
                      <p class="text-2xl font-semibold text-gray-900">
                      <% if @countdown.negative? %>
                      <%= 0 %>km to go</p>
                      <% else %>
                      <%= @countdown %>km to go</p>
                      <% end %>
                    </div>

                    <div data-controller="modal" data-modal-allow-background-close="true">
                      <a data-action="click->modal#open" class="ml-3 text-xs leading-5 font-medium text-violet-600 dark:text-violet-400 bg-violet-400/10 no-underline rounded-full py-1 px-1.5 flex items-center hover:bg-violet-400/20" href="#">
                        <span class="ml-2 inline no-underline">See more</span>
                        <svg width="3" height="6" class="ml-3 overflow-visible text-violet-300 dark:text-violet-400" aria-hidden="true"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                      </a>

                      <!-- Modal Container -->
                      <div data-modal-target="container" data-action="click->modal#closeBackground keyup@window->modal#closeWithKeyboard"
                      class="backdrop-blur-sm hidden bg-white/50 animated fadeIn fixed inset-0 overflow-y-auto flex items-center justify-center" style="z-index: 9999;">
                        <!-- Modal Inner Container -->
                        <div class="max-h-screen w-full max-w-lg relative">
                          <!-- Modal Card -->
                          <div class="m-1 bg-white rounded shadow">
                            <div class="p-8">
                              <h2 class="text-xl mb-4">Tyres</h2>
                              <p class="mb-4">Remember to rotate your tyres from to back every 10,000km. This helps keep the level of wear consistent throughout all four tyres.</p>
                              <%# <% @car.tyres = @car.kilometers%>
                              <h3 class="text-lg font-medium leading-6 text-gray-900">
                                  <%= simple_form_for [@car], html: { data: { action: "turbo:submit-end" }} do |f| %>
                                  <%= f.error_notification %>
                                  <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>
                                  <%= f.input :tyres %>
                                <div class="form-actions">
                                  <%= f.submit class:"btn btn-primary", data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to reset the counter?" }%>
                                </div>
                                <% end %> </h3>
                               <div class="flex justify-end items-center flex-wrap mt-6">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Reset Counter</button>
                              </div>
                              <div class="flex justify-end items-center flex-wrap mt-6">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-action="click->modal#close">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
               <div data-controller="progress" class="bg-violet-200 rounded-full w-full"
              data-progress-percent-value=
              "<% if tyres_value >= 100 %>
              <%= 100 %>
              <% else %>
              <%= tyres_value %>
              <% end %>">
                <div data-progress-target="bar"
                      class="bg-violet-500 rounded-full h-2 transition-all ease-in-out"
                      style="width: 0%; transition-duration: 2s;"></div>
              </div>
            </div>

            <% spignite_changed_at = 20000.to_f %>
            <% spignite_interval = 30000.to_f %>
            <% spignite_difference = (@car.kilometers - spignite_changed_at) %>
            <% spignite_value = (spignite_difference / spignite_interval).to_f * 100 %>
            <% spignite_countdown = spignite_interval - spignite_difference %>
            <div class="relative overflow-hidden rounded-lg bg-white p-4 shadow space-y-4">
              <div class="flex">
                <div class="flex-grow-1 space-y-4">
                  <div class="flex items-center justify-between">
                    <div class="space-y-0.5">
                      <p class="text-sm text-violet-500 font-medium mb-0">Spark Plugs & Ignition</p>
                      <p class="text-2xl font-semibold text-gray-900">
                      <% if spignite_countdown.round(-1).negative? %>
                      <%= 0 %>km to go</p>
                      <% else %>
                      <%= spignite_countdown.round(-1) %>km to go</p>
                      <% end %>
                    </div>

                    <div data-controller="modal" data-modal-allow-background-close="true">
                      <a data-action="click->modal#open" class="ml-3 text-xs leading-5 font-medium text-violet-600 dark:text-violet-400 bg-violet-400/10 no-underline rounded-full py-1 px-1.5 flex items-center hover:bg-violet-400/20"
                                            href="#">
                                          <span class="ml-2 inline no-underline">See more</span>
                                          <svg width="3" height="6" class="ml-3 overflow-visible text-violet-300 dark:text-violet-400" aria-hidden="true"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                        </a>

                      <!-- Modal Container -->
                      <div data-modal-target="container" data-action="click->modal#closeBackground keyup@window->modal#closeWithKeyboard"
                      class="backdrop-blur-sm hidden bg-white/50 animated fadeIn fixed inset-0 overflow-y-auto flex items-center justify-center" style="z-index: 9999;">
                        <!-- Modal Inner Container -->
                        <div class="max-h-screen w-full max-w-lg relative">
                          <!-- Modal Card -->
                          <div class="m-1 bg-white rounded shadow">
                            <div class="p-8">
                              <h2 class="text-xl mb-4">Large Modal Content</h2>
                              <p class="mb-4">This is an example modal dialog box.</p>
                              <div class="flex justify-end items-center flex-wrap mt-6">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-action="click->modal#close">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
               <div data-controller="progress" class="bg-violet-200 rounded-full w-full"
              data-progress-percent-value=
              "<% if spignite_value >= 100 %>
              <%= 100 %>
              <% else %>
              <%= spignite_value %>
              <% end %>">
                <div data-progress-target="bar"
                      class="bg-violet-500 rounded-full h-2 transition-all ease-in-out"
                      style="width: 0%; transition-duration: 2s;"></div>
              </div>
            </div>
            <% oilfilters_changed_at = 20000.to_f %>
            <% oilfilters_interval = 15000.to_f %>
            <% oilfilters_difference = (@car.kilometers - oilfilters_changed_at) %>
            <% oilfilters_value = (oilfilters_difference / oilfilters_interval).to_f * 100 %>
            <% oilfilters_countdown = oilfilters_interval - oilfilters_difference %>
            <div class="relative overflow-hidden rounded-lg bg-white p-4 shadow space-y-4">
              <div class="flex">
                <div class="flex-grow-1 space-y-4">
                  <div class="flex items-center justify-between">
                    <div class="space-y-0.5">
                      <p class="text-sm text-violet-500 font-medium mb-0">Oil & Filters</p>
                      <p class="text-2xl font-semibold text-gray-900">
                      <% if oilfilters_countdown.round(-1).negative? %>
                      <%= 0 %>km to go</p>
                      <% else %>
                      <%= oilfilters_countdown.round(-1) %>km to go</p>
                      <% end %>
                    </div>
                    <div data-controller="modal" data-modal-allow-background-close="true">
                      <a data-action="click->modal#open" class="ml-3 text-xs leading-5 font-medium text-violet-600 dark:text-violet-400 bg-violet-400/10 no-underline rounded-full py-1 px-1.5 flex items-center hover:bg-violet-400/20"
                                            href="#">
                                          <span class="ml-2 inline no-underline">See more</span>
                                          <svg width="3" height="6" class="ml-3 overflow-visible text-violet-300 dark:text-violet-400" aria-hidden="true"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                        </a>

                      <!-- Modal Container -->
                      <div data-modal-target="container" data-action="click->modal#closeBackground keyup@window->modal#closeWithKeyboard"
                      class="backdrop-blur-sm hidden bg-white/50 animated fadeIn fixed inset-0 overflow-y-auto flex items-center justify-center" style="z-index: 9999;">
                        <!-- Modal Inner Container -->
                        <div class="max-h-screen w-full max-w-lg relative">
                          <!-- Modal Card -->
                          <div class="m-1 bg-white rounded shadow">
                            <div class="p-8">
                              <h2 class="text-xl mb-4">Large Modal Content</h2>
                              <p class="mb-4">This is an example modal dialog box.</p>
                              <div class="flex justify-end items-center flex-wrap mt-6">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-action="click->modal#close">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
               <div data-controller="progress" class="bg-violet-200 rounded-full w-full"
              data-progress-percent-value=
              "<% if oilfilters_value >= 100 %>
              <%= 100 %>
              <% else %>
              <%= oilfilters_value %>
              <% end %>">
                <div data-progress-target="bar"
                      class="bg-violet-500 rounded-full h-2 transition-all ease-in-out"
                      style="width: 0%; transition-duration: 2s;"></div>
              </div>
            </div>
            <% brakes_changed_at = 20000.to_f %>
            <% brakes_interval = 80000.to_f %>
            <% brakes_difference = (@car.kilometers - brakes_changed_at) %>
            <% brakes_value = (brakes_difference / brakes_interval).to_f * 100 %>
            <% brakes_countdown = brakes_interval - brakes_difference %>
            <div class="relative overflow-hidden rounded-lg bg-white p-4 shadow space-y-4">
              <div class="flex">
                <div class="flex-grow-1 space-y-4">
                  <div class="flex items-center justify-between">
                    <div class="space-y-0.5">
                      <p class="text-sm text-violet-500 font-medium mb-0">Brakes</p>
                      <p class="text-2xl font-semibold text-gray-900">
                      <% if brakes_countdown.round(-1).negative? %>
                      <%= 0 %>km to go</p>
                      <% else %>
                      <%= brakes_countdown.round(-1) %>km to go</p>
                      <% end %>
                    </div>
                    <div data-controller="modal" data-modal-allow-background-close="true">
                      <a data-action="click->modal#open" class="ml-3 text-xs leading-5 font-medium text-violet-600 dark:text-violet-400 bg-violet-400/10 no-underline rounded-full py-1 px-1.5 flex items-center hover:bg-violet-400/20"
                                            href="#">
                                          <span class="ml-2 inline no-underline">See more</span>
                                          <svg width="3" height="6" class="ml-3 overflow-visible text-violet-300 dark:text-violet-400" aria-hidden="true"><path d="M0 0L3 3L0 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
                                        </a>

                      <!-- Modal Container -->
                      <div data-modal-target="container" data-action="click->modal#closeBackground keyup@window->modal#closeWithKeyboard"
                      class="backdrop-blur-sm hidden bg-white/50 animated fadeIn fixed inset-0 overflow-y-auto flex items-center justify-center" style="z-index: 9999;">
                        <!-- Modal Inner Container -->
                        <div class="max-h-screen w-full max-w-lg relative">
                          <!-- Modal Card -->
                          <div class="m-1 bg-white rounded shadow">
                            <div class="p-8">
                              <h2 class="text-xl mb-4">Large Modal Content</h2>
                              <p class="mb-4">This is an example modal dialog box.</p>
                              <div class="flex justify-end items-center flex-wrap mt-6">
                                <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" data-action="click->modal#close">Close</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div data-controller="progress" class="bg-violet-200 rounded-full w-full"
              data-progress-percent-value=
              "<% if brakes_value >= 100 %>
              <%= 100 %>
              <% else %>
              <%= brakes_value %>
              <% end %>">
                <div data-progress-target="bar"
                      class="bg-violet-500 rounded-full h-2 transition-all ease-in-out"
                      style="width: 0%; transition-duration: 2s;"></div>
              </div>
            </div>
          <%# <% end %>
        </div>
      </div>
    </div>
  </div>

</div>
